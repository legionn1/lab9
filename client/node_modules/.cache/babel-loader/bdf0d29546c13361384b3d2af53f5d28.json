{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _taggedTemplateLiteral from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\src\\\\pages\\\\launches.tsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query launchList($after: String) {\\n    launches(after: $after) {\\n      cursor\\n      hasMore\\n      launches {\\n        ...LaunchTile\\n      }\\n    }\\n  }\\n  \", \"\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  fragment LaunchTile on Launch {\\n    id\\n    isBooked\\n    rocket {\\n      id\\n      name\\n    }\\n    mission {\\n      name\\n      missionPatch\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Fragment } from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { Button, Loading } from '../components';\nexport var LAUNCH_TILE_DATA = gql(_templateObject());\nvar GET_LAUNCHES = gql(_templateObject2(), LAUNCH_TILE_DATA);\n\nvar Launches = function Launches() {\n  var _useQuery = useQuery(GET_LAUNCHES),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      fetchMore = _useQuery.fetchMore;\n\n  if (loading) return /*#__PURE__*/React.createElement(Loading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 23\n    }\n  });\n  if (error) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 21\n    }\n  }, \"ERROR\");\n  if (!data) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, \"Not found\");\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }, data.launches && data.launches.hasMore && /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return fetchMore({\n        variables: {\n          after: data.launches.cursor\n        },\n        updateQuery: function updateQuery(prev, _ref) {\n          var fetchMoreResult = _ref.fetchMoreResult,\n              rest = _objectWithoutProperties(_ref, [\"fetchMoreResult\"]);\n\n          if (!fetchMoreResult) return prev;\n          return _objectSpread({}, fetchMoreResult, {\n            launches: _objectSpread({}, fetchMoreResult.launches, {\n              launches: [].concat(_toConsumableArray(prev.launches.launches), _toConsumableArray(fetchMoreResult.launches.launches))\n            })\n          });\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, \"Load More\"));\n};\n\nexport default Launches;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/Учёба/Серверные/lab9/client/src/pages/launches.tsx"],"names":["React","Fragment","useQuery","gql","Button","Loading","LAUNCH_TILE_DATA","GET_LAUNCHES","Launches","data","loading","error","fetchMore","launches","hasMore","variables","after","cursor","updateQuery","prev","fetchMoreResult","rest"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,SAA6BC,MAA7B,EAAqCC,OAArC,QAAoD,eAApD;AAIA,OAAO,IAAMC,gBAAgB,GAAGH,GAAH,mBAAtB;AAeP,IAAMI,YAAY,GAAGJ,GAAH,qBAUdG,gBAVc,CAAlB;;AAeA,IAAME,QAAiC,GAAG,SAApCA,QAAoC,GAAM;AAAA,kBAM1CN,QAAQ,CAGVK,YAHU,CANkC;AAAA,MAE5CE,IAF4C,aAE5CA,IAF4C;AAAA,MAG5CC,OAH4C,aAG5CA,OAH4C;AAAA,MAI5CC,KAJ4C,aAI5CA,KAJ4C;AAAA,MAK5CC,SAL4C,aAK5CA,SAL4C;;AAY9C,MAAIF,OAAJ,EAAa,oBAAO,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACb,MAAIC,KAAJ,EAAW,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AACX,MAAI,CAACF,IAAL,EAAW,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAP;AAEX,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IAAI,CAACI,QAAL,IACLJ,IAAI,CAACI,QAAL,CAAcC,OADT,iBAEH,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE;AAAA,aACPF,SAAS,CAAC;AACRG,QAAAA,SAAS,EAAE;AACTC,UAAAA,KAAK,EAAEP,IAAI,CAACI,QAAL,CAAcI;AADZ,SADH;AAIRC,QAAAA,WAAW,EAAE,qBAACC,IAAD,QAAwC;AAAA,cAA/BC,eAA+B,QAA/BA,eAA+B;AAAA,cAAXC,IAAW;;AACnD,cAAI,CAACD,eAAL,EAAsB,OAAOD,IAAP;AACtB,mCACKC,eADL;AAEEP,YAAAA,QAAQ,oBACHO,eAAe,CAACP,QADb;AAENA,cAAAA,QAAQ,+BACHM,IAAI,CAACN,QAAL,CAAcA,QADX,sBAEHO,eAAe,CAACP,QAAhB,CAAyBA,QAFtB;AAFF;AAFV;AAUD;AAhBO,OAAD,CADF;AAAA,KADX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHA,CADF;AAgCD,CAhDD;;AAkDA,eAAeL,QAAf","sourcesContent":["import React, { Fragment } from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { LaunchTile, Header, Button, Loading } from '../components';\nimport { RouteComponentProps } from '@reach/router';\nimport * as GetLaunchListTypes from './__generated__/GetLaunchList';\n\nexport const LAUNCH_TILE_DATA = gql`\n  fragment LaunchTile on Launch {\n    id\n    isBooked\n    rocket {\n      id\n      name\n    }\n    mission {\n      name\n      missionPatch\n    }\n  }\n`;\n\nconst GET_LAUNCHES = gql`\n  query launchList($after: String) {\n    launches(after: $after) {\n      cursor\n      hasMore\n      launches {\n        ...LaunchTile\n      }\n    }\n  }\n  ${LAUNCH_TILE_DATA}\n`;\n\ninterface LaunchesProps extends RouteComponentProps {}\n\nconst Launches: React.FC<LaunchesProps> = () => {\n  const { \n    data, \n    loading, \n    error, \n    fetchMore\n  } = useQuery<\n    GetLaunchListTypes.GetLaunchList, \n    GetLaunchListTypes.GetLaunchListVariables\n  >(GET_LAUNCHES);\n\n\n  if (loading) return <Loading />;\n  if (error) return <p>ERROR</p>;\n  if (!data) return <p>Not found</p>;\n\n  return (\n    <Fragment>\n      {data.launches && \n  data.launches.hasMore && (\n    <Button\n      onClick={() =>\n        fetchMore({\n          variables: {\n            after: data.launches.cursor,\n          },\n          updateQuery: (prev, { fetchMoreResult, ...rest }) => {\n            if (!fetchMoreResult) return prev;\n            return {\n              ...fetchMoreResult,\n              launches: {\n                ...fetchMoreResult.launches,\n                launches: [\n                  ...prev.launches.launches,\n                  ...fetchMoreResult.launches.launches,\n                ],\n              },\n            };\n          },\n        })\n      }\n    >\n      Load More\n    </Button>\n  )\n}\n    </Fragment>\n  );\n}\n\nexport default Launches;"]},"metadata":{},"sourceType":"module"}