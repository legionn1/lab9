{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\\\u0423\\u0447\\u0451\\u0431\\u0430\\\\\\u0421\\u0435\\u0440\\u0432\\u0435\\u0440\\u043D\\u044B\\u0435\\\\lab9\\\\client\\\\src\\\\containers\\\\action-button.tsx\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation cancel($launchId: ID!) {\\n    cancelTrip(launchId: $launchId) {\\n      success\\n      message\\n      launches {\\n        id\\n        isBooked\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation addOrRemoveFromCart($launchId: ID!) {\\n    addOrRemoveFromCart(id: $launchId) @client\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\nimport { GET_LAUNCH_DETAILS } from '../pages/launch';\nimport Button from '../components/button';\nexport var TOGGLE_CART = gql(_templateObject());\nexport var CANCEL_TRIP = gql(_templateObject2());\n\nvar ActionButton = function ActionButton(_ref) {\n  var isBooked = _ref.isBooked,\n      id = _ref.id,\n      isInCart = _ref.isInCart;\n\n  var _useMutation = useMutation(isBooked ? CANCEL_TRIP : TOGGLE_CART, {\n    variables: {\n      launchId: id\n    },\n    refetchQueries: [{\n      query: GET_LAUNCH_DETAILS,\n      variables: {\n        launchId: id\n      }\n    }]\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      mutate = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      loading = _useMutation2$.loading,\n      error = _useMutation2$.error;\n\n  if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 23\n    }\n  }, \"Loading...\");\n  if (error) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, \"An error occurred\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return mutate();\n    },\n    \"data-testid\": 'action-button',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, isBooked ? 'Cancel This Trip' : isInCart ? 'Remove from Cart' : 'Add to Cart'));\n};\n\nexport default ActionButton;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/Учёба/Серверные/lab9/client/src/containers/action-button.tsx"],"names":["React","useMutation","gql","GET_LAUNCH_DETAILS","Button","TOGGLE_CART","CANCEL_TRIP","ActionButton","isBooked","id","isInCart","variables","launchId","refetchQueries","query","mutate","loading","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,OAAOC,GAAP,MAAgB,aAAhB;AAEA,SAASC,kBAAT,QAAmC,iBAAnC;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AAGA,OAAO,IAAMC,WAAW,GAAGH,GAAH,mBAAjB;AAMP,OAAO,IAAMI,WAAW,GAAGJ,GAAH,oBAAjB;;AAeP,IAAMK,YAAyC,GAAG,SAA5CA,YAA4C,OAAgC;AAAA,MAA7BC,QAA6B,QAA7BA,QAA6B;AAAA,MAAnBC,EAAmB,QAAnBA,EAAmB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAAA,qBAC3CT,WAAW,CAC9CO,QAAQ,GAAGF,WAAH,GAAiBD,WADqB,EAE9C;AACEM,IAAAA,SAAS,EAAE;AAAEC,MAAAA,QAAQ,EAAEH;AAAZ,KADb;AAEEI,IAAAA,cAAc,EAAE,CACd;AACEC,MAAAA,KAAK,EAAEX,kBADT;AAEEQ,MAAAA,SAAS,EAAE;AAAEC,QAAAA,QAAQ,EAAEH;AAAZ;AAFb,KADc;AAFlB,GAF8C,CADgC;AAAA;AAAA,MACzEM,MADyE;AAAA;AAAA,MAC/DC,OAD+D,kBAC/DA,OAD+D;AAAA,MACtDC,KADsD,kBACtDA,KADsD;;AAchF,MAAID,OAAJ,EAAa,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACb,MAAIC,KAAJ,EAAW,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAP;AAEX,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAE;AAAA,aAAMF,MAAM,EAAZ;AAAA,KADX;AAEE,mBAAa,eAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIGP,QAAQ,GACL,kBADK,GAELE,QAAQ,GACN,kBADM,GAEN,aARR,CADF,CADF;AAcD,CA/BD;;AAiCA,eAAeH,YAAf","sourcesContent":["import React from 'react';\nimport { useMutation } from '@apollo/react-hooks';\nimport gql from 'graphql-tag';\n\nimport { GET_LAUNCH_DETAILS } from '../pages/launch';\nimport Button from '../components/button';\nimport * as LaunchDetailTypes from '../pages/__generated__/LaunchDetails';\n\nexport const TOGGLE_CART = gql`\n  mutation addOrRemoveFromCart($launchId: ID!) {\n    addOrRemoveFromCart(id: $launchId) @client\n  }\n`;\n\nexport const CANCEL_TRIP = gql`\n  mutation cancel($launchId: ID!) {\n    cancelTrip(launchId: $launchId) {\n      success\n      message\n      launches {\n        id\n        isBooked\n      }\n    }\n  }\n`;\n\ninterface ActionButtonProps extends Partial<LaunchDetailTypes.LaunchDetails_launch> {}\n\nconst ActionButton: React.FC<ActionButtonProps> = ({ isBooked, id, isInCart }) => {\n  const [mutate, { loading, error }] = useMutation(\n    isBooked ? CANCEL_TRIP : TOGGLE_CART,\n    {\n      variables: { launchId: id },\n      refetchQueries: [\n        {\n          query: GET_LAUNCH_DETAILS,\n          variables: { launchId: id },\n        },\n      ]\n    }\n  );\n\n  if (loading) return <p>Loading...</p>;\n  if (error) return <p>An error occurred</p>;\n\n  return (\n    <div>\n      <Button\n        onClick={() => mutate()}\n        data-testid={'action-button'}\n      >\n        {isBooked\n          ? 'Cancel This Trip'\n          : isInCart\n            ? 'Remove from Cart'\n            : 'Add to Cart'}\n      </Button>\n    </div>\n  );\n}\n\nexport default ActionButton;"]},"metadata":{},"sourceType":"module"}